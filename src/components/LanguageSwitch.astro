---
const currentLang = Astro.url.searchParams.get('lang') || 'fr';
---
<div class="relative inline-block">
  <button id="langSwitch" class="flex items-center space-x-1 text-sm bg-transparent hover:text-blue-400 transition-colors">
    <span class="current-lang">{currentLang.toUpperCase()}</span>
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>
</div>

<script>
  const langSwitch = document.getElementById('langSwitch');
  
  langSwitch?.addEventListener('click', () => {
    const currentUrl = new URL(window.location.href);
    const currentLang = currentUrl.searchParams.get('lang') || 'fr';
    const newLang = currentLang === 'en' ? 'fr' : 'en';
    
    currentUrl.searchParams.set('lang', newLang);
    window.location.href = currentUrl.toString();
  });
</script>